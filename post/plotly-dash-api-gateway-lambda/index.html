<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Plotly Dash API Gateway Lambda - Brian Pfeil</title>
<script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Brian Pfeil","url":"https:\/\/brianpfeil.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/brianpfeil.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/brianpfeil.com\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/brianpfeil.com\/post\/plotly-dash-api-gateway-lambda\/","name":"Plotly dash API gateway lambda"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Brian Pfeil"},"headline":"Plotly Dash API Gateway Lambda","description":"","inLanguage":"en","wordCount":808,"datePublished":"2022-04-04T00:00:00\u002b00:00","dateModified":"2022-04-04T00:00:00\u002b00:00","image":"https:\/\/brianpfeil.com\/","keywords":["lambda, dash, aws"],"mainEntityOfPage":"https:\/\/brianpfeil.com\/post\/plotly-dash-api-gateway-lambda\/","publisher":{"@type":"Organization","name":"https:\/\/brianpfeil.com\/","logo":{"@type":"ImageObject","url":"https:\/\/brianpfeil.com\/","height":60,"width":60}}}</script><meta property="og:title" content="Plotly Dash API Gateway Lambda"><meta property="og:url" content="https://brianpfeil.com/post/plotly-dash-api-gateway-lambda/"><meta property="og:type" content="website"><meta property="og:site_name" content="Brian Pfeil"><meta name=twitter:title content="Plotly Dash API Gateway Lambda"><meta name=twitter:card content="summary_large_image"><meta name=generator content="Hugo 0.124.1"><link rel=alternate href=https://brianpfeil.com/index.xml type=application/rss+xml title="Brian Pfeil"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v6.6.0/css/all.css integrity=sha384-h/hnnw1Bi4nbpD6kE7nYfCXzovi622sY5WBxww8ARKwpdLj5kUWjRuyiXaD1U2JT crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><link rel=stylesheet href=https://brianpfeil.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://brianpfeil.com/css/highlight.min.css><link rel=stylesheet href=https://brianpfeil.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><link rel=stylesheet href=https://brianpfeil.com/css/custom.css><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-610553-4","auto"),ga("send","pageview"))</script></head><body><nav class="navbar navbar-default navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://brianpfeil.com/>Brian Pfeil</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=about href=/about/>about</a></li><li><a title=posts href=/>posts</a></li><li><a title=projects href=/projects/>projects</a></li><li><a title=tags href=/tags/>tags</a></li><li><a id=dark-mode-toggle><i class="fa fa-moon hidden" id=dark-mode-enabled-icon aria-hidden=true></i>
<i class="fa fa-sun hidden" id=dark-mode-disabled-icon aria-hidden=true></i></a></li></ul></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Plotly Dash API Gateway Lambda</h1><span class=post-meta>April 4, 2022
<span class=blog-tags>&nbsp;&bull;&nbsp;
<a href=https://brianpfeil.com//tags/lambda/>lambda</a>
,
<a href=https://brianpfeil.com//tags/dash/>dash</a>
,
<a href=https://brianpfeil.com//tags/aws/>aws</a></span></span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><div class="alert alert-info small bg-info" role=alert><span class=text-muted>code for article</span>&nbsp;<a href=https://github.com/pfeilbr/plotly-dash-api-gateway-lambda-playground target=_blank><i class="fab fa-github fa-sm"></i>&nbsp;pfeilbr/plotly-dash-api-gateway-lambda-playground</a></div><p>Example of Dash application deployed to AWS Lambda + AWS API Gateway. based on <a href=https://github.com/ratajczak/dash-lambda>ratajczak/dash-lambda</a></p><h2 id=demo>Demo</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sam build --use-container
</span></span><span class=line><span class=cl>sam deploy --guided
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>open https://zzzzzzzzzz.execute-api.us-east-1.amazonaws.com/Prod/dash
</span></span></code></pre></div><hr><p><img src=https://www.evernote.com/l/AAGhAriurJlLNr2OeYQqRPPv-KwQX_8K_h8B/image.png alt></p><h2 id=resources>Resources</h2><ul><li><a href=https://github.com/ratajczak/dash-lambda>ratajczak/dash-lambda</a> - Example of Dash application deployed to AWS Lambda</li><li><a href=https://community.plotly.com/t/uncaught-referenceerror-dashrenderer-is-not-defined/34585>Uncaught ReferenceError: DashRenderer is not defined</a></li></ul><hr><blockquote><p>original README.md below</p></blockquote><h1 id=example-of-dash-application-deployed-to-aws-lambda>Example of Dash application deployed to AWS Lambda</h1><h2 id=deployment>Deployment</h2><p>The Serverless Application Model Command Line Interface (SAM CLI) is an extension of the AWS CLI that adds functionality for building and testing Lambda applications. It uses Docker to run your functions in an Amazon Linux environment that matches Lambda. It can also emulate your application&rsquo;s build environment and API.</p><p>To use the SAM CLI, you need the following tools.</p><ul><li>SAM CLI - <a href=https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html>Install the SAM CLI</a></li><li><a href=https://www.python.org/downloads/>Python 3 installed</a></li><li>Docker - <a href="https://hub.docker.com/search/?type=edition&amp;offering=community">Install Docker community edition</a></li></ul><p>To build and deploy your application for the first time, run the following in your shell:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sam build --use-container
</span></span><span class=line><span class=cl>sam deploy --guided
</span></span></code></pre></div><p>The first command will build the source of your application. The second command will package and deploy your application to AWS, with a series of prompts:</p><ul><li><strong>Stack Name</strong>: The name of the stack to deploy to CloudFormation. This should be unique to your account and region, and a good starting point would be something matching your project name.</li><li><strong>AWS Region</strong>: The AWS region you want to deploy your app to.</li><li><strong>Confirm changes before deploy</strong>: If set to yes, any change sets will be shown to you before execution for manual review. If set to no, the AWS SAM CLI will automatically deploy application changes.</li><li><strong>Allow SAM CLI IAM role creation</strong>: Many AWS SAM templates, including this example, create AWS IAM roles required for the AWS Lambda function(s) included to access AWS services. By default, these are scoped down to minimum required permissions. To deploy an AWS CloudFormation stack which creates or modified IAM roles, the <code>CAPABILITY_IAM</code> value for <code>capabilities</code> must be provided. If permission isn&rsquo;t provided through this prompt, to deploy this example you must explicitly pass <code>--capabilities CAPABILITY_IAM</code> to the <code>sam deploy</code> command.</li><li><strong>Save arguments to samconfig.toml</strong>: If set to yes, your choices will be saved to a configuration file inside the project, so that in the future you can just re-run <code>sam deploy</code> without parameters to deploy changes to your application.</li></ul><p>You can find your API Gateway Endpoint URL in the output values displayed after deployment.</p><h2 id=use-the-sam-cli-to-build-and-test-locally>Use the SAM CLI to build and test locally</h2><p>Build your application with the <code>sam build --use-container</code> command.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dash-app$ sam build --use-container
</span></span></code></pre></div><p>The SAM CLI installs dependencies defined in <code>requirements.txt</code>, creates a deployment package, and saves it in the <code>.aws-sam/build</code> folder.</p><p>Test a single function by invoking it directly with a test event. An event is a JSON document that represents the input that the function receives from the event source. Test events are included in the <code>events</code> folder in this project.</p><p>Run functions locally and invoke them with the <code>sam local invoke</code> command.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dash-app$ sam <span class=nb>local</span> invoke Dash --event events/event.json
</span></span></code></pre></div><p>The SAM CLI can also emulate your application&rsquo;s API. Use the <code>sam local start-api</code> to run the API locally on port 3000.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dash-app$ sam <span class=nb>local</span> start-api
</span></span><span class=line><span class=cl>dash-app$ curl http://localhost:3000/
</span></span></code></pre></div><p>The SAM CLI reads the application template to determine the API&rsquo;s routes and the functions that they invoke. The <code>Events</code> property on each function&rsquo;s definition includes the route and method for each path.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>      </span><span class=nt>Events</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>HelloWorld</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>Type</span><span class=p>:</span><span class=w> </span><span class=l>Api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>Properties</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>Path</span><span class=p>:</span><span class=w> </span><span class=l>/hello</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>Method</span><span class=p>:</span><span class=w> </span><span class=l>get</span><span class=w>
</span></span></span></code></pre></div><h2 id=add-a-resource-to-your-application>Add a resource to your application</h2><p>The application template uses AWS Serverless Application Model (AWS SAM) to define application resources. AWS SAM is an extension of AWS CloudFormation with a simpler syntax for configuring common serverless application resources such as functions, triggers, and APIs. For resources not included in <a href=https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md>the SAM specification</a>, you can use standard <a href=https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html>AWS CloudFormation</a> resource types.</p><h2 id=fetch-tail-and-filter-lambda-function-logs>Fetch, tail, and filter Lambda function logs</h2><p>To simplify troubleshooting, SAM CLI has a command called <code>sam logs</code>. <code>sam logs</code> lets you fetch logs generated by your deployed Lambda function from the command line. In addition to printing the logs on the terminal, this command has several nifty features to help you quickly find the bug.</p><p><code>NOTE</code>: This command works for all AWS Lambda functions; not just the ones you deploy using SAM.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dash-app$ sam logs -n Dash --stack-name sam-dash --tail
</span></span></code></pre></div><p>You can find more information and examples about filtering Lambda function logs in the <a href=https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-logging.html>SAM CLI Documentation</a>.</p><h2 id=cleanup>Cleanup</h2><p>To delete the sample application that you created, use the AWS CLI. Assuming you used your project name for the stack name, you can run the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>aws cloudformation delete-stack --stack-name sam-dash
</span></span></code></pre></div><h2 id=resources-1>Resources</h2><p>See the <a href=https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/what-is-sam.html>AWS SAM developer guide</a> for an introduction to SAM specification, the SAM CLI, and serverless application concepts.</p><p>Next, you can use AWS Serverless Application Repository to deploy ready to use Apps that go beyond hello world samples and learn how authors developed their applications: <a href=https://aws.amazon.com/serverless/serverlessrepo/>AWS Serverless Application Repository main page</a></p><hr><section id=social-share><div class="list-inline footer-links text-center"><span class=text-muted>share on</span><br><a href="//twitter.com/share?url=https%3a%2f%2fbrianpfeil.com%2fpost%2fplotly-dash-api-gateway-lambda%2f&amp;text=Plotly%20Dash%20API%20Gateway%20Lambda&amp;via=" target=_blank title="Share on Twitter">Twitter</a>
&nbsp;&bull;&nbsp;
<a href="//reddit.com/submit?url=https%3a%2f%2fbrianpfeil.com%2fpost%2fplotly-dash-api-gateway-lambda%2f&amp;title=Plotly%20Dash%20API%20Gateway%20Lambda" target=_blank title="Share on Reddit">Reddit</a></div></section></article><ul class="pager blog-pager"><li class=previous><a href=https://brianpfeil.com/post/aws-rds/ data-toggle=tooltip data-placement=top title="AWS RDS">&larr; AWS RDS</a></li><li class=next><a href=https://brianpfeil.com/post/lambda-function-urls/ data-toggle=tooltip data-placement=top title="Lambda Function Urls">Lambda Function Urls &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=https://twitter.com/pfeilbr title=twitter><span class=footer-link>twitter</span></a></li><li><a href=https://github.com/pfeilbr title=github><span class=footer-link>github</span></a></li><li><a href=https://stackoverflow.com/users/29148/pfeilbr title="stack overflow"><span class=footer-link>stack overflow</span></a></li><li><a href=/index.xml title=RSS><span class=footer-link>rss</span></a></li></ul><p class="credits copyright text-muted">&nbsp;&bull;&nbsp;&copy;
2024</p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://brianpfeil.com/js/main.js></script><script src=https://brianpfeil.com/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script>renderMathInElement(document.body)</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://brianpfeil.com/js/load-photoswipe.js></script><script src=https://unpkg.com/darkreader@4.9.16/darkreader.js crossorigin=anonymous></script><script>(()=>{DarkReader.setFetchMethod(window.fetch);const e="DARK_MODE_ENABLED_KEY",n=document.getElementById("dark-mode-enabled-icon"),s=document.getElementById("dark-mode-disabled-icon");if(n===null||s===null)return;const t="hidden",o=()=>{window.localStorage&&(DarkReader.enable({brightness:100,contrast:90,sepia:10}),window.localStorage.setItem(e,"true"),n.classList.add(t),s.classList.remove(t))},i=()=>{window.localStorage&&(DarkReader.disable(),window.localStorage.getItem(e)&&window.localStorage.removeItem(e),n.classList.remove(t),s.classList.add(t))},a=()=>window.localStorage&&window.localStorage.getItem(e)!=null,r=()=>{a()?i():o()};a()?o():i();const c=document.getElementById("dark-mode-toggle");c.addEventListener("click",r)})()</script><script></script><script id=search-result-template type=text/x-js-template>
<article class="post-preview" id="summary-${key}">
    <a class="search-item" href="${link}">
        <h2 class="post-title">${title}</h2>
    </a>

    <p class="post-meta">
        <span class="post-meta">
            ${postedOnDate}
            <span class="blog-tags">
                &nbsp;•&nbsp;
                ${ isset tags }${tags}${ end }
            </span>
        </span>
    </p>
    <div class="post-entry">
    ${snippet}
    </div>
</article>
</script><script>const postCount=296</script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.0/fuse.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js></script><script src=https://brianpfeil.com/js/search.js></script></body></html>