<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en-us" lang="en-us" >

<head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="generator" content="Hugo 0.67.0" />

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Running Elasticsearch on AWS Elastic Beanstalk &middot; Brian Pfeil</title>
    <meta name="description" content="" />

    

    
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/poole.css">
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/syntax.css">
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/hyde.css">

    <link rel="stylesheet" href="https://brianpfeil.com/css/custom.css">

      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">

    
    
</head>
  <body class=" ">
  <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            <a href="https://brianpfeil.com/">
                <h1>Brian Pfeil</h1>
            </a>
            <p class="lead">
                 --- 
            </p>
        </div>

        <nav>
            <ul class="sidebar-nav">
                <li><a href="https://brianpfeil.com/">home</a> </li>
                <li><a href="/about/"> about </a></li><li><a href="https://github.com/pfeilbr/"> github </a></li><li><a href="/projects/"> projects </a></li>
            </ul>
        </nav>

        <p>&copy; 2020. All rights reserved. 
        </p>
    </div>
</aside>
    <main class="content container">
    <div class="post">
  <h1>Running Elasticsearch on AWS Elastic Beanstalk</h1>
  <time datetime=2015-03-25T21:25:09Z class="post-date">Wed, Mar 25, 2015</time>
  <blockquote>
<p><strong>TL;DR</strong> code on github @ <a href="https://github.com/pfeilbr/Elastic-Beanstalk-Dockerrun.aws.json-Example">pfeilbr/Elastic-Beanstalk-Dockerrun.aws.json-Example</a></p>
</blockquote>
<p>This article will show you the steps to run <a href="https://www.elastic.co/">elasticsearch</a> on <a href="http://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk</a>. This example uses the <a href="https://registry.hub.docker.com/_/elasticsearch/">elasticsearch docker image</a> as an example.  Once running you can visit <code>http://&lt;beanstalk domain&gt;/?pretty</code> an you will see the root elastic search JSON response.</p>
<h2 id="initial-deployment">Initial Deployment</h2>
<ol>
<li>
<p>Modify <code>Dockerrun.aws.json</code> for your needs.</p>
<blockquote>
<p><a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker_image.html#create_deploy_docker_image_dockerrun">Dockerrun.aws.json</a> reference</p>
</blockquote>
</li>
<li>
<p>Commit changes to repo</p>
<pre><code>$ git commit -a -m &quot;changes&quot;
</code></pre><p>``</p>
<blockquote>
<p>assumes <code>Dockerrun.aws.json</code> has already been added to repo.  if not, <code>git add .</code></p>
</blockquote>
</li>
<li>
<p>Create eb app</p>
<pre><code>$ eb init # populate details
</code></pre><p>``</p>
<blockquote>
<p>NOTE: select Docker.  Populate all details</p>
</blockquote>
</li>
<li>
<p>Create environment for app</p>
<pre><code>$ eb create dev-env
</code></pre><p>``</p>
<blockquote>
<p><strong>IMPORTANT</strong> Must immediately update the ec2 instance with tags so it doesn&rsquo;t get terminated.  Enable termination protection on the ec2 instance.</p>
</blockquote>
</li>
</ol>
<h2 id="deploying-updates">Deploying Updates</h2>
<ol>
<li>
<p>Modify <code>Dockerrun.aws.json</code> for your needs.</p>
</li>
<li>
<p>Commit changes</p>
<pre><code>$ git commit -a -m &quot;my updates&quot;
</code></pre><p>``</p>
</li>
<li>
<p>Deploy to eb</p>
<pre><code>$ eb deploy
</code></pre><p>``</p>
</li>
</ol>
<blockquote>
<p>NOTE: Takes between 3-5 min to deploy changes</p>
</blockquote>
<h2 id="notes">Notes</h2>
<p>Port mapping details specific to aws beanstalk</p>
<p><img src="images/config.png" alt=""></p>

</div>


    </main>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-610553-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
  </body>
</html>
