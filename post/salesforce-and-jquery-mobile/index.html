<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en-us" lang="en-us" >

<head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="generator" content="Hugo 0.67.0" />

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Salesforce and jQuery Mobile &middot; Brian Pfeil</title>
    <meta name="description" content="" />

    

    
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/poole.css">
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/syntax.css">
    <link type="text/css" rel="stylesheet" href="https://brianpfeil.com/css/hyde.css">

    <link rel="stylesheet" href="https://brianpfeil.com/css/custom.css">

      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">

    
    
</head>
  <body class=" ">
  <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="sidebar-about">
            <a href="https://brianpfeil.com/">
                <h1>Brian Pfeil</h1>
            </a>
            <p class="lead">
                 --- 
            </p>
        </div>

        <nav>
            <ul class="sidebar-nav">
                <li><a href="https://brianpfeil.com/">home</a> </li>
                <li><a href="/about/"> about </a></li><li><a href="https://github.com/pfeilbr/"> github </a></li><li><a href="/projects/"> projects </a></li>
            </ul>
        </nav>

        <p>&copy; 2020. All rights reserved. 
        </p>
    </div>
</aside>
    <main class="content container">
    <div class="post">
  <h1>Salesforce and jQuery Mobile</h1>
  <time datetime=2011-09-11T00:58:00Z class="post-date">Sun, Sep 11, 2011</time>
  <p>I wanted to do a project to learn <a href="http://salesforce.com">salesforce</a>, but not a trivial hello
world style example. I had recently played around with <a href="http://jquerymobile.com/">jQuery Mobile</a>, but
didn&rsquo;t do anything significant with it. I decided to put together a basic
mobile CRM app.  Here&rsquo;s what the finished app looks like.</p>
<p><img src="https://img.skitch.com/20110910-enbnxextqtsfyc431skq2m9ws6.png" alt="contact list screen shot">
<img src="https://img.skitch.com/20110910-di6tn8haxrr7abtks1927cj11r.png" alt="view contact screen shot">
<img src="https://img.skitch.com/20110910-mq92tg5csrc43equ7rskyyjrp1.png" alt="edit contact screen shot"></p>
<p><a href="http://salesforce.com">Salesforce</a> provides a full-featured environment for free to anyone. It takes
no time to <a href="http://www.developerforce.com/events/regular/registration.php">sign-up</a> for this <a href="http://wiki.developerforce.com/index.php/Developer_Edition">Developer Edition</a>, and you get access to
everything. If you&rsquo;re just getting started with <a href="http://salesforce.com">salesforce</a>, I <em>can&rsquo;t
recommend enough</em> the online tutorials, workbooks, and documentation at
<a href="http://developer.force.com">developer.force.com</a>.</p>
<h2 id="accessing-the-app-data-">Accessing the App Data</h2>
<p>Our app will contain Contact and Account data.  We&rsquo;ll use Apex Web Service methods to provide the data.  We can get all our Contacts with the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">webService <span style="color:#66d9ef">static</span> List<span style="color:#f92672">&lt;</span>Contact<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">getContacts</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	ApexPages<span style="color:#f92672">.</span><span style="color:#a6e22e">StandardSetController</span> setCon <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ApexPages<span style="color:#f92672">.</span><span style="color:#a6e22e">StandardSetController</span><span style="color:#f92672">(</span>
		Database<span style="color:#f92672">.</span><span style="color:#a6e22e">getQueryLocator</span><span style="color:#f92672">(</span>
        	<span style="color:#f92672">[</span>select id<span style="color:#f92672">,</span> name<span style="color:#f92672">,</span> lastname<span style="color:#f92672">,</span> firstname<span style="color:#f92672">,</span> title<span style="color:#f92672">,</span> department<span style="color:#f92672">,</span> phone<span style="color:#f92672">,</span> email from Contact<span style="color:#f92672">]));</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>Contact<span style="color:#f92672">&gt;)</span>setCon<span style="color:#f92672">.</span><span style="color:#a6e22e">getRecords</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Next we need to call the web service method from the client code.  We&rsquo;ll use the force.com ajax apex javascript libraries to access our data.  Add these script references to your page <code>&lt;head&gt;</code> section.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/soap/ajax/15.0/connection.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/soap/ajax/15.0/apex.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><p>To call the web service method from JavaScript we use this simple one-liner.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">contacts</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sforce</span>.<span style="color:#a6e22e">apex</span>.<span style="color:#a6e22e">execute</span>(<span style="color:#e6db74">&#34;MyWebService&#34;</span>, <span style="color:#e6db74">&#34;getContacts&#34;</span>, {});
</code></pre></div><h2 id="building-the-ui-">Building the UI</h2>
<p>Our mobile app UI will be 100% <a href="http://jquerymobile.com/">jQuery Mobile</a>, and we can use <a href="http://force.com">force.com</a>
<a href="http://developer.force.com/sites">Sites</a> to provide pure web content. <a href="http://developer.force.com/sites">Sites</a> by default provides configurable
headers, footers, navigation, etc. that you can apply themes to. We don&rsquo;t want
any of this in our app since we&rsquo;ll be controlling everything in the UI. To
turn off the default stylesheets, header, and navigation elements your
<code>apex:page</code> element should set the corresponding attributes, and should look
similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">apex:page</span> <span style="color:#a6e22e">showHeader</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#a6e22e">sidebar</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#a6e22e">standardStylesheets</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#a6e22e">contentType</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/html&#34;</span>&gt;
</code></pre></div><p>Now we&rsquo;ll add in the jQuery Mobile references.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.css&#34;</span> /&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://code.jquery.com/jquery-1.6.2.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://code.jquery.com/mobile/1.0b2/jquery.mobile-1.0b2.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><p>The beauty of jQuery Mobile is that all you have to do is markup your html
with the correct attributes to get a mobile UI. You don&rsquo;t need to write any
JavaScript. Usually you serve up the jQuery <em>Mobilized</em> html from the server.
We want our app to run and function when the device is offline, so we&rsquo;re going
to generate the html at run-time on the client using JavaScript to remove the
dependency on the server.</p>
<p>To minimize the amount of html we embed in our JavaScript, we&rsquo;re going to use
<a href="http://api.jquery.com/jQuery.template/">jQuery Templates</a>. <a href="http://api.jquery.com/jQuery.template/">jQuery Templates</a> allows us to write our html for the UI
as we usually would, and to leave placeholders for the pieces we want to
replace. Here&rsquo;s an example of a template used to generate a list page.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;object-list-page-template&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/x-jquery-tmpl&#34;</span>&gt;

<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;page&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${type}-list-page&#34;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">url</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;${type}-list-page&#39;</span><span style="color:#f92672">&gt;</span>
	<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;header&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h1</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">$</span>{<span style="color:#a6e22e">pageTitle</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/h1&gt;</span>
		<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">a</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;${type}-add-link&#39;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">obj</span><span style="color:#f92672">-</span><span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;${type}&#39;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ui-btn-right object-add-link&#39;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">icon</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;add&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Add</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/a&gt;</span>
	<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>

	<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">ul</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;listview&#34;</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${type}-list&#34;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">filter</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/ul&gt;</span>
	<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>

	<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;footer&#34;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;footer-nav-bar&#39;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">position</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fixed&#34;</span><span style="color:#f92672">&gt;</span>
		<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;navbar&#34;</span><span style="color:#f92672">&gt;</span>
			<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">ul</span><span style="color:#f92672">&gt;</span>
				<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">li</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#contact-list-page&#34;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">transition</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fade&#34;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${(type == &#39;contact&#39;) ? &#39;ui-btn-active&#39; : &#39;&#39;} ui-state-persist&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Contacts</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/a&gt;&lt;/li&gt;</span>
				<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">li</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#account-list-page&#34;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">transition</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fade&#34;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;${(type == &#39;account&#39;) ? &#39;ui-btn-active&#39; : &#39;&#39;} ui-state-persist&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Accounts</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/a&gt;&lt;/li&gt;</span>
			<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/ul&gt;</span>
		<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
	<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>

&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><p>The things wrapped in <code>${}</code> are replaced with the values.  The way we use the template is by calling the <code>$.tmpl</code> method.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">$page</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;#object-list-page-template&#39;</span>).<span style="color:#a6e22e">tmpl</span>(<span style="color:#a6e22e">data</span>);
</code></pre></div><p>jQuery Templates are very powerful, and really help with the maintainability of your code.  Check out the <a href="http://api.jquery.com/jQuery.template/">documentation</a> to learn more.</p>
<h2 id="conclusion-">Conclusion</h2>
<p>This provides an overview of the core pieces of the solution and the technologies used.  If you like to dive in deeper, the complete source is available on <strong><a href="https://github.com/pfeilbr/salesforce-jquery-mobile">github</a></strong>, and the working app is available <strong><a href="http://j.mp/msales-dev">here</a></strong> (must be viewed in a <a href="http://www.webkit.org/">WebKit</a> based browser).</p>

</div>


    </main>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-610553-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
  </body>
</html>
